# 最短デモ（MVP）実現に向けた開発計画書（超・最小構成版）

## 1. はじめに

このドキュメントは、IR分析プロジェクトのコアバリューを早期に実証するため、UIと**分析内容を最小限**にしたデモ（Minimum Viable Product）の実現に向けた開発計画と方針を定義するものです。

## 2. 基本方針

データベースへの永続化をスコープアウトし、取得したデータをメモリ上で直接処理する方針は維持します。さらに、**既存の高度な分析モジュール (`utils/analysis.py`) を使用せず**、主要な財務項目をシンプルに表示することに特化し、開発速度を最大化します。

### この方針のメリット
- **開発速度の最大化:** DB連携と複雑な分析ロジックの両方を後回しにし、最短（約1日）でのデモ実現を目指します。
- **価値の早期検証:** 「企業データを取得し、即座に主要業績を可視化する」というプロジェクトの核心的価値を、最も早く具体的に示すことができます。

## 3. デモのシナリオ（超・最小構成版）

1.  ユーザーがStreamlitアプリケーションを開きます。
2.  画面に、あらかじめ定義された企業リストがプルダウンメニューで表示されます。
3.  ユーザーがプルダウンから分析したい企業を1社選択し、「分析実行」ボタンをクリックします。
4.  処理が実行され、選択された企業の**主要な財務項目（例: 売上高、経常利益、純利益）とその簡易的なグラフ**が画面に表示されます。

## 4. 実装タスクの見積もり

このデモを実現するための合計工数は **約1営業日** を見込んでいます。

### タスク1: データ取得機能の改修 (`utils/api.py`)

- **方針:** 特定の `docId` を1つだけ受け取り、その会社の財務データ（DataFrame）を返す、シンプルで再利用性の高い関数 `fetch_single_company_data` に改修します。
- **主な作業内容:** 既存の`fetch_financial_data`関数のロジックを整理し、ループ処理を削除します。
- **見積もり工数:** **約0.5日**

### タスク2: UIとシンプルな分析・表示ロジックの実装 (`app/app.py`)

- **方針:** `utils.analysis.py`を**使用せず**、`app/app.py`内で直接、取得したデータから主要な財務項目のみを抜粋してシンプルに表示します。
- **主な作業内容:**
  1.  **UIコンポーネントの配置:** ハードコードされた企業リストを表示するプルダウンと、分析実行ボタンを配置します。
  2.  **財務データの取得:** 分析ボタンが押されたら、**タスク1**で改修した `fetch_single_company_data` を呼び出します。
  3.  **シンプルな分析・抽出:** `pandas`を使い、取得したDataFrameから「売上高」「経常利益」「純利益」など、数個の主要項目の値を抽出します。
  4.  **結果の表示:** 抽出した数値を `st.metric` で表示し、`st.bar_chart` で簡単な棒グラフを表示します。
- **見積もり工数:** **約0.5日**

## 5. デモのスコープ（やること・やらないこと）

### やること (In Scope)
- 特定の1社の財務データをEDINETからリアルタイム取得。
- **取得データから主要数項目を抜粋し、数値を表示。**
- **主要数項目の簡易的なグラフ（棒グラフなど）を表示。**
- 上記をStreamlitの基本的なUIで操作・表示する一連の流れ。

### やらないこと (Out of Scope)
- **`utils/analysis.py` を用いた高度な財務指標（ROE, ROA等）の計算と可視化。**
- データベースへの一切のデータ保存・読み込み。
- 複数企業を横断した比較分析機能。
- 過去データとの時系列分析機能。
- ユーザー認証、エラーハンドリング、パフォーマンスチューニング等の堅牢化。

## 6. 結論

本計画に基づき開発を進めることで、**約1営業日**という極めて短い期間で、プロジェクトの核心機能を実証するデモを構築することが可能です。

---

## 7. 現在の実装状況と残タスク (2025-08-18現在)

### 実装済みの機能

- **Streamlitアプリケーションの基本設定:**
  - `app/app.py` にて、アプリケーションの起動と基本的な画面表示設定が完了しています。
- **企業リスト取得機能:**
  - `utils.api.get_company_list` により、特定の日付に提出された書類のリストを取得する機能は実装済みです。
- **（参考）分析・可視化の部品関数:**
  - `utils.analysis.py` に、高度な分析を行う関数群は実装済みですが、**この超・最小構成版では使用しません。**

### 未実装の機能（残タスク）

- **タスク1: データ取得機能の改修:**
  - `utils/api.py`内の`fetch_financial_data`を、単一企業を対象とする`fetch_single_company_data`へと改修。
- **タスク2: UIとシンプルな分析・表示ロジックの実装:**
  - `app/app.py`に、企業選択プルダウンと分析実行ボタンを配置。
  - ユーザーの選択に応じて`fetch_single_company_data`を呼び出すロジックを実装。
  - 取得したDataFrameから主要数項目を抽出し、`st.metric`や`st.bar_chart`で表示する処理を実装。